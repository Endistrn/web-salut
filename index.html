<html lang="id" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DATA MAHASISWA SALUT LIWA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-[#80D8C3] text-[rgb(245,245,245)] min-h-screen flex flex-col">
  <header class="bg-[#075B5E] shadow-md">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <img src="https://raw.githubusercontent.com/Endistrn/web-salut/main/logo%20salut.jpg" alt="Logo Salut Liwa, a stylized emblem with blue and yellow colors representing the Salut Liwa institution" class="h-12 w-auto rounded-md shadow-md" />
        <h1 class="text-2xl font-semibold">DATA MAHASISWA SALUT LIWA</h1>
      </div>
      <nav>
        <ul class="flex space-x-6 text-[rgb(245,245,245)] text-sm font-medium items-center">
          <li>
            <a href="#form" aria-label="Form Data" class="icon-link hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-600 p-1" title="Form Data">
              <i class="fas fa-list text-lg"></i>
            </a>
          </li>
          <li>
            <a href="#list" aria-label="Daftar Mahasiswa" class="icon-link hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-600 p-1" title="Daftar Mahasiswa">
              <i class="fas fa-users text-lg"></i>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="flex-grow max-w-7xl mx-auto px-4 py-8 w-full">
    <section id="form" class="bg-[#075B5E] rounded-lg shadow-lg p-6 max-w-3xl mx-auto">
      <h2 class="text-xl font-semibold mb-6 text-center">FORM INPUT DATA MAHASISWA</h2>
      <form id="mahasiswaForm" class="space-y-5" autocomplete="off" novalidate>
        <div>
          <label for="nama" class="block mb-1 font-medium">NAMA LENGKAP</label>
          <input
            type="text"
            id="nama"
            name="nama"
            required
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
            placeholder="MASUKKAN NAMA LENGKAP"
          />
        </div>
        <div>
          <label for="nim" class="block mb-1 font-medium">NIM</label>
          <input
            type="text"
            id="nim"
            name="nim"
            required
            pattern="^[0-9]+$"
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
            placeholder="MASUKKAN NIM (HANYA ANGKA)"
          />
        </div>
        <div>
          <label for="passwordTuton" class="block mb-1 font-medium">PASSWORD TUTON</label>
          <input
            type="text"
            id="passwordTuton"
            name="passwordTuton"
            required
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
            placeholder="MASUKKAN PASSWORD TUTON"
          />
        </div>
        <div>
          <label for="tempatLahir" class="block mb-1 font-medium">TEMPAT LAHIR</label>
          <input
            type="text"
            id="tempatLahir"
            name="tempatLahir"
            required
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
            placeholder="MASUKKAN TEMPAT LAHIR"
          />
        </div>
        <div>
          <label for="tanggalLahir" class="block mb-1 font-medium">TANGGAL LAHIR</label>
          <input
            type="date"
            id="tanggalLahir"
            name="tanggalLahir"
            required
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
          />
        </div>
        <div>
          <label for="emailAdmisi" class="block mb-1 font-medium">EMAIL ADMISI</label>
          <input
            type="email"
            id="emailAdmisi"
            name="emailAdmisi"
            required
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
            placeholder="CONTOH: NAMA@DOMAIN.COM"
          />
        </div>
        <div>
          <label for="passwordAdmisi" class="block mb-1 font-medium">PASSWORD ADMISI</label>
          <input
            type="text"
            id="passwordAdmisi"
            name="passwordAdmisi"
            required
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
            placeholder="MASUKKAN PASSWORD ADMISI"
          />
        </div>
        <div>
          <label for="passwordEcampus" class="block mb-1 font-medium">PASSWORD ECAMPUS</label>
          <input
            type="text"
            id="passwordEcampus"
            name="passwordEcampus"
            required
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
            placeholder="MASUKKAN PASSWORD ECAMPUS"
          />
        </div>
        <div>
          <label for="nik" class="block mb-1 font-medium">NIK</label>
          <input
            type="text"
            id="nik"
            name="nik"
            required
            pattern="^[0-9]{16}$"
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
            placeholder="MASUKKAN NIK (16 DIGIT ANGKA)"
          />
        </div>
        <div>
          <label for="alamat" class="block mb-1 font-medium">ALAMAT</label>
          <textarea
            id="alamat"
            name="alamat"
            rows="3"
            required
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
            placeholder="MASUKKAN ALAMAT LENGKAP"
          ></textarea>
        </div>
        <div>
          <label for="namaIbu" class="block mb-1 font-medium">NAMA IBU KANDUNG</label>
          <input
            type="text"
            id="namaIbu"
            name="namaIbu"
            required
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
            placeholder="MASUKKAN NAMA IBU KANDUNG"
          />
        </div>
        <div>
          <label for="nomorTelpon" class="block mb-1 font-medium">NOMOR TELEPON</label>
          <input
            type="tel"
            id="nomorTelpon"
            name="nomorTelpon"
            required
            pattern="^\+?[0-9\s\-]{7,15}$"
            class="w-full rounded-md px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#F5F5F5]"
            placeholder="MASUKKAN NOMOR TELEPON"
          />
        </div>
        <div class="text-center">
          <button
            type="submit"
            class="bg-[#F5F5F5] text-[#4DA8DA] font-semibold rounded-md px-6 py-2 hover:bg-white focus:outline-none focus:ring-2 focus:ring-[#F5F5F5] inline-flex items-center justify-center"
          >
            SIMPAN DATA
            <span id="saveIcon">
              <img src="https://raw.githubusercontent.com/Endistrn/web-salut/main/diskette.png" alt="Icon diskette, a classic floppy disk symbol representing save action, blue and white colors" class="w-5 h-5" />
            </span>
          </button>
        </div>
      </form>
    </section>

    <section id="list" class="mt-12 max-w-5xl mx-auto">
      <h2 class="text-xl font-semibold mb-6 text-center normal-case" style="color: #F5F5F5;">Daftar Mahasiswa</h2>
      <div class="overflow-x-auto rounded-lg shadow-lg bg-[#075B5E]">
        <table class="min-w-full text-left" style="color: #F5F5F5;">
          <thead class="border-b" style="border-color: #F5F5F5;">
            <tr>
              <th class="px-4 py-3">No</th>
              <th class="px-4 py-3">Nama</th>
              <th class="px-4 py-3">NIM</th>
              <th class="px-4 py-3">Tempat Lahir</th>
              <th class="px-4 py-3">Tanggal Lahir</th>
              <th class="px-4 py-3">Email Admisi</th>
              <th class="px-4 py-3">NIK</th>
              <th class="px-4 py-3">Alamat</th>
              <th class="px-4 py-3">Nama Ibu Kandung</th>
              <th class="px-4 py-3">Nomor Telepon</th>
              <th class="px-4 py-3">Aksi</th>
            </tr>
          </thead>
          <tbody id="mahasiswaList" class="divide-y" style="border-color: #F5F5F5;">
            <!-- Data rows will be inserted here dynamically -->
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="bg-[#075B5E] text-center py-4 mt-12">
    <p class="text-[rgb(245,245,245)] text-sm uppercase">&copy; 2024 DATA MAHASISWA SALUT LIWA. ALL RIGHTS RESERVED.</p>
  </footer>

  <script>
    const form = document.getElementById('mahasiswaForm');
    const list = document.getElementById('mahasiswaList');

    // Load saved data from localStorage or initialize empty array
    let mahasiswaData = JSON.parse(localStorage.getItem('mahasiswaData')) || [];

    function renderList() {
      list.innerHTML = '';
      if (mahasiswaData.length === 0) {
        list.innerHTML = `<tr><td colspan="11" class="text-center py-4" style="color: #F5F5F5;">Belum ada data mahasiswa.</td></tr>`;
        return;
      }
      mahasiswaData.forEach((mhs, index) => {
        const tr = document.createElement('tr');
        tr.classList.add('hover:bg-[#6bb9d6]');
        tr.style.color = '#F5F5F5';
        tr.innerHTML = `
          <td class="px-4 py-2 align-top">${index + 1}</td>
          <td class="px-4 py-2 align-top break-words max-w-xs">${mhs.nama}</td>
          <td class="px-4 py-2 align-top">${mhs.nim}</td>
          <td class="px-4 py-2 align-top">${mhs.tempatLahir}</td>
          <td class="px-4 py-2 align-top">${mhs.tanggalLahir}</td>
          <td class="px-4 py-2 align-top break-words max-w-xs">${mhs.emailAdmisi}</td>
          <td class="px-4 py-2 align-top">${mhs.nik}</td>
          <td class="px-4 py-2 align-top break-words max-w-xs">${mhs.alamat}</td>
          <td class="px-4 py-2 align-top break-words max-w-xs">${mhs.namaIbu}</td>
          <td class="px-4 py-2 align-top">${mhs.nomorTelpon}</td>
          <td class="px-4 py-2 align-top">
            <button aria-label="Hapus data mahasiswa ${mhs.nama}" data-index="${index}" class="deleteBtn hover:text-red-400 focus:outline-none focus:ring-2 focus:ring-red-400" style="color: #F5F5F5;">
              <i class="fas fa-trash-alt"></i>
            </button>
          </td>
        `;
        list.appendChild(tr);
      });

      // Attach delete event listeners
      document.querySelectorAll('.deleteBtn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const idx = e.currentTarget.getAttribute('data-index');
          if (confirm(`Yakin ingin menghapus data mahasiswa "${mahasiswaData[idx].nama}"?`)) {
            mahasiswaData.splice(idx, 1);
            localStorage.setItem('mahasiswaData', JSON.stringify(mahasiswaData));
            renderList();
          }
        });
      });
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      const newMahasiswa = {
        nama: form.nama.value.trim(),
        nim: form.nim.value.trim(),
        passwordTuton: form.passwordTuton.value,
        tempatLahir: form.tempatLahir.value.trim(),
        tanggalLahir: form.tanggalLahir.value,
        emailAdmisi: form.emailAdmisi.value.trim(),
        passwordAdmisi: form.passwordAdmisi.value,
        passwordEcampus: form.passwordEcampus.value,
        nik: form.nik.value.trim(),
        alamat: form.alamat.value.trim(),
        namaIbu: form.namaIbu.value.trim(),
        nomorTelpon: form.nomorTelpon.value.trim(),
      };

      // Check for duplicate NIM or NIK
      const duplicateNIM = mahasiswaData.some(m => m.nim === newMahasiswa.nim);
      const duplicateNIK = mahasiswaData.some(m => m.nik === newMahasiswa.nik);
      if (duplicateNIM) {
        alert('NIM sudah terdaftar.');
        return;
      }
      if (duplicateNIK) {
        alert('NIK sudah terdaftar.');
        return;
      }

      mahasiswaData.push(newMahasiswa);
      localStorage.setItem('mahasiswaData', JSON.stringify(mahasiswaData));
      renderList();
      form.reset();
      form.nama.focus();
      alert('Data mahasiswa berhasil disimpan.');
    });

    // Initial render
    renderList();
  </script>
</body>
</html>